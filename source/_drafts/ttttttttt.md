死锁的四个必要条件：

- 互斥条件(Mutual exclusion)：资源不能被共享，只能由一个进程使用。
- 请求与保持条件(Hold and wait)：已经得到资源的进程可以再次申请新的资源。
- 非剥夺条件(No pre-emption)：已经分配的资源不能从相应的进程中被强制地剥夺。
- 循环等待条件(Circular wait)：系统中若干进程组成环路，该环路中每个进程都在等待相邻进程正占用的资源。

简单描述：

- 一个资源只能被一个线程占有
- 一个线程可以同时占有多个资源
- 资源被占有后，不会被抢走
- 多个线程对资源的请求，形成闭环





数据库的锁机制



- select 加s锁
- 
- insert、update、delete加x锁
- 事务结束后，才会释放锁资源
- asdf
- 

| a                                 | b                                 |
| --------------------------------- | --------------------------------- |
| update A (x)                      |                                   |
|                                   | update B (x)                      |
| select B (s，等待B的x锁释放) 阻塞 |                                   |
|                                   | select A (s，等待A的x锁释放) 阻塞 |

| a    | b    |
| ---- | ---- |
|      |      |
|      |      |
|      |      |

